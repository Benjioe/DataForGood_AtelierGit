<html>

<head>
    <link rel="stylesheet" href="node_modules/reveal.js/dist/reveal.css">
    <link rel="stylesheet" href="node_modules/reveal.js/dist/theme/white.css">
    <link rel="stylesheet" href="node_modules/reveal.js/plugin/highlight/monokai.css" />
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="reveal">
        <div class="slides">
            <section>
                <section data-auto-animate>
                    <h1>Utiliser GIT</h1>
                    <h2>Ligne de commande</h2>

                    <pre><code class="language-shell">> git ...</code></pre>

                    <aside class="notes">
                        - Comprendre ce qu'il se passe
                        - stage partiel difficile
                    </aside>
                </section>
                <section data-auto-animate>
                    <h1>Utiliser GIT</h1>
                    <h2>GUI</h2>
                    <img src="img/github-desktop.PNG" /><br />
                    <a href="https://git-scm.com/downloads/guis">https://git-scm.com/downloads/guis</a>
                </section>
                <section data-auto-animate>
                    <h1>Utiliser GIT</h1>
                    <h2>Intégration IDE</h2>
                    <img src="img/vscode.PNG" />

                </section>
                <section>
                    <h1>On va avoir besoin de </h1>
                    <ul>
                        <li><a href="https://git-scm.com/downloads">Git</a></li>
                        <li><a href="https://github.com/apps/desktop">Github Desktop</a></li>
                        <li><a href="https://code.visualstudio.com/">Visual Studio Code</a></li>
                        <li><a href="https://marketplace.visualstudio.com/items?itemName=huizhou.githd">Git History
                                Diff</a></li>
                    </ul>
                </section>
            </section>
            <section>
                <h1>Activer git</h1>
                <pre><code class="language-powershell">git init</code></pre>

                <p>
                    crée un dossier .git (working tree)
                </p>
            </section>
            <section>
                <section data-auto-animate>
                    <h1>Modifier la configuration</h1>
                    <pre><code class="language-powershell" data-id="code">git config</code></pre>
                </section>
                <section data-auto-animate>
                    <h1>Modifier la configuration</h1>
                    <h2 data-id="title">de la machine</h2>
                    <pre><code class="language-powershell" data-id="code">git config --system</code></pre>
                    <span data-id="file">C:\Program Files\Git\mingw64\etc\gitconfig</p>
                </section>
                <section data-auto-animate>
                    <h1>Modifier la configuration</h1>
                    <h2 data-id="title">d'un projet</h2>
                    <pre><code class="language-powershell" data-id="code">git config</code></pre>
                    <span data-id="file">.git/config</p>
                </section>
                <section data-auto-animate>
                    <h1>Modifier la configuration</h1>
                    <h2 data-id="title">de l'utilisateur</h2>
                    <pre><code class="language-powershell" data-id="code">git config --global</code></pre>
                    <span data-id="file">C:\Users\Benjamin\.gitconfig</p>
                </section>
                <section>
                    <h1>Recherche de configuration</h1>
                    <ol>
                        <li>Configuration du projet</li>
                        <li>Configuration de l'utilisateur</li>
                        <li>Configuration de la machine</li>
                    </ol>

                    <aside class="notes">
                        Système d'héritage
                    </aside>
                </section>
                <section data-auto-animate>
                    <pre><code class="language-powershell" data-id="code">git config --global</code></pre>
                </section>
                <section data-auto-animate>
                    <pre><code class="language-powershell" data-id="code">git config --global user.name</code></pre>
                </section>
                <section data-auto-animate>
                    <pre><code class="language-powershell" data-id="code">git config --global user.name "Ferrier Benjamin"</code></pre>
                </section>
                <section data-auto-animate>
                    <pre><code class="language-powershell" data-id="code">git config --global user.name "Ferrier Benjamin"</code></pre>
                    <pre><code class="language-powershell" data-id="code2">git config --global user.email</code></pre>
                </section>
                <section data-auto-animate>
                    <pre><code class="language-powershell" data-id="code">git config --global user.name "Ferrier Benjamin"</code></pre>
                    <pre><code class="language-powershell" data-id="code2">git config --global user.email</code></pre>
                    <pre>
                        <code class="language-powershell" data-trim>
                            git config --global core.editor "code --wait"
                        </code>
                    </pre>
                    <dl>
                        <dt>--wait</dt>
                        <dd>force le développeur à fermer le fichier avant de continuer</dd>
                    </dl>
                    <aside class="notes">
                        En console : l'editeur utilisé
                    </aside>
                </section>
                <section>
                    <h1>A vous</h1>
                </section>
            </section>
            <section>
                <section>
                    <h1>Ajouter un élément à un historique existant</h1>
                </section>
                <section data-auto-animate>
                    <h1 data-id="title">On fait des modification</h1>

                    <pre data-id="code">
                        <code data-trim class="language-powershell">git status</code>
                    </pre>
                </section>
                <section data-auto-animate>
                    <h1 data-id="title">On prend celles qui nous intéresses (stage)</h1>

                    <pre><code class="language-powershell" data-id="code">git add "nom/chemin du fichier"</code></pre>
                    <pre><code class="language-powershell">git add --all</code></pre>

                    <p>
                        stage partiel (vscode)
                    </p>
                </section>
                <section data-auto-animate>
                    <h1 data-id="title">On commit</h1>

                    <pre>
                        <code data-trim class="language-powershell">git commit -m "message"</code></pre>
                    </pre>
                </section>
                <section>
                    <h1>Attention aux commits !</h1>

                    <ul>
                        <li>Pas de données gigantesques</li>
                        <li>Pas de données sensibles</li>
                    </ul>
                </section>
                <section data-auto-animate>
                    <h1>Quelle taille de commits ?</h1>
                    <ul>
                        <li>Trop gros: difficile à comprendre le commit</li>
                        <li>Trop petit: difficile de comprendre l'historique</li>
                    </ul>
                </section>
                <section data-auto-animate>
                    <h1>Quelle taille de commits ?</h1>
                    <ul>
                        <li>Trop gros: difficile à comprendre le commit</li>
                        <li>Trop petit: difficile de comprendre l'historique</li>
                        <li style="margin-top: 50px;">Modification qui intéragissent ensemble</li>
                        <li>Apporte un changement "visible"</li>
                    </ul>
                </section>
            </section>
            <section>
                <section>
                    <h1>Afficher l'historique</h1>
                    <pre><code data-trim class="language-powershell">git log</code></pre>


                    <dl>
                        <dt>Commandes du man (linux)</dt>
                        <dd>
                            <ul>
                                <li>/ + N: recherche textuelle</li>
                                <li>q: pour quitter</li>
                            </ul>
                        </dd>
                    </dl>

                    <h3 style="margin-top: 100px;">Git History Diff</h3>
                    <pre>
                        <code data-trim class="language-powershell">
                            > GitHd: View Entire History
                        </code>
                    </pre>
                </section>
                <section>
                    <h1>Afficher un commit</h1>

                    <pre>
                        <code data-trim class="language-powershell">
                            git show "id du commit"
                        </code>
                    </pre>

                    <h3 style="margin-top: 100px;">Git History Diff</h3>
                    <pre>
                        <code data-trim class="language-txt">
                            > GitHd: Input ref
                        </code>
                    </pre>
                    <pre>
                        <code data-trim class="language-txt">
                            > id
                        </code>
                    </pre>
                </section>
                <section>
                    <h1>A vous</h1>
                </section>
            </section>
            <section>
                <section>
                    <h1>Branches</h1>
                    <ul>
                        <li>Pouvoir abandonner une évolution entamée</li>
                        <li>Travailler sur plusieurs sujets en parallèle</li>
                    </ul>
                </section>
                <section>
                    <h1>Branches</h1>
                    <ol>
                        <li><b>On va sur la branche principal (master ou main)</b></li>
                        <li>On crée une nouvelle branche</li>
                        <li>On va dessus</li>
                        <li>Les nouveaux commit sont uniquement sur notre branche</li>
                        <li><b>Quand on a terminé, on récupère les nouveautées de la branche principal</b></li>
                        <li><b>Puis on ajoute les nouveaux commits sur la branche principal</b></li>
                    </ol>
                </section>
                <section>
                    <h3>Créer une branche</h3>
                    <pre>
                        <code data-trim class="language-powershell">
                            git branch nom_branch
                        </code>
                    </pre>


                    <h3 style="margin-top: 50px;">Changer de branche</h3>
                    <pre>
                        <code data-trim class="language-powershell">
                            git switch nom_branch
                        </code>
                    </pre>

                    <h3 style="margin-top: 50px;">Lister les branches</h3>
                    <pre>
                        <code data-trim class="language-powershell">
                            git branch
                        </code>
                    </pre>

                    <h3 style="margin-top: 50px;">Supprimer une branche</h3>
                    <pre>
                        <code data-trim class="language-powershell">
                            git branch -d nom_branch
                        </code>
                    </pre>
                </section>

                <section>
                    <h1>Récupère les nouveauté de master</h1>

                    <pre>
                        <code data-trim class="language-powershell">
                            git rebase master nom_branch
                            git rebase --continue
                            git rebase --abort
                        </code>
                    </pre>

                    <img src="img/branch-rebase.png" />
                </section>
                <section>
                    <h1>Ajouter nos commit à master</h1>
                    <h2>Fast Forward</h2>

                    <pre>
                        <code data-trim class="language-powershell">
                            git switch master
                            git merge nom_branch
                        </code>
                    </pre>

                    <img src="img/branch-merge.png" />

                </section>
            </section>
            
            <section>
                <section>
                    <h1>En interne</h1>
                    <h2>Branches</h2>
                    
                    <ul>
                        <li>Les branches sont dans .git\refs\heads</li>
                        <li>Chaque ficher branche contient l'identifiant du dernier commit</li>
                        <li>.git\HEAD permet de connaitre la branche courante</li>
                    </ul>
                </section>
                <section>
                    <h1>En interne</h1>
                    <h2>Retracer l'historique ?</h2>
                    
                    <p>
                        Les commits sont stockés dans .git/object
                    </p>

                    <pre data-id="code">
                        <code data-trim class="language-powershell">
                            git cat-file -p "commit id"
                        </code>
                    </pre>

                </section>
                <section>
                    <h1>En interne</h1>
                    <h2>Contenu d'un commit</h2>

                    <ul>
                        <li><b>tree</b> Id du fichier contenant les modifications</li>
                        <li><b>parent</b> Id du commit précédent</li>
                        <li><b>author</b> user.name &lt;user.email&gt; date_commit</li>
                        <li><b>message</b></li>
                    </ul>
                </section>

                <section>
                    <h1>En interne</h1>
                    <h2>Afficher l'historique</h2>

                    <ol>
                        <li>Récupérer le premier commit dans .git/HEAD</li>
                        <li>Afficher le contenu du fichier</li>
                        <li>Récupérer l'identifiant du parent</li>
                        <li>Afficher le contenu du fichier parent</li>
                        <li>...</li>
                    </ol>

                    <p style="margin-top: 100px;">Optimisation: .git\logs</p>
                </section>
                <section>
                    <h1>En interne</h1>
                    <h2>Id du commit = Hash</h2>

                    <h3>Un Hash: </h3>
                    <ul>
                        <li>Transforme un contenu en une clée unique</li>
                        <li>Si le contenu change, le hash change</li>
                    </ul>
                </section>

            </section>
            <section>
                <h1>Sommaire</h1>

                <ol>
                    <li>Créer un historique local</li>
                    <li><a href="chapitre2.html">Travailler à plusieurs avec GitHub</a></li>
                    <li><a href="chapitre3.html">Utiliser la puissance de GIT</a></li>
                    <li><a href="fin.html">Pour aller plus loin</a></li>
                </ol>
            </section>
        </div>
    </div>
    <script type="module">
        import Reveal from './node_modules/reveal.js/dist/reveal.esm.js'
        import RevealNotes from "./node_modules/reveal.js/plugin/notes/notes.esm.js"
        import RevealHighlight from "./node_modules/reveal.js/plugin/highlight/highlight.esm.js"

        Reveal.initialize({
            hash: true,
            navigationMode: "linear",
            width: 1920,
            height: 1080,
            plugins: [RevealNotes, RevealHighlight],
        });
    </script>

</html>